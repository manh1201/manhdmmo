<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premium Store - ƒê·ª©c M·∫°nh</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #0f172a; color: white; }
        .glass { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .gradient-text { background: linear-gradient(90deg, #3b82f6, #8b5cf6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    </style>
</head>
<body class="min-h-screen">

    <!-- Navbar -->
    <nav class="glass sticky top-0 z-50 px-6 py-4 flex justify-between items-center">
        <h1 class="text-2xl font-bold gradient-text">DUC MANH PREMIUM</h1>
        <div class="space-x-4 flex items-center">
            <button onclick="showSection('home')" class="hover:text-blue-400">Trang ch·ªß</button>
            <button onclick="toggleCart()" class="relative">
                <i class="fa-solid fa-cart-shopping"></i>
                <span id="cart-count" class="absolute -top-2 -right-2 bg-red-500 text-xs rounded-full px-1.5">0</span>
            </button>
            <div id="auth-buttons">
                <button onclick="showModal('loginModal')" class="bg-blue-600 px-4 py-1.5 rounded-lg hover:bg-blue-700">ƒêƒÉng nh·∫≠p</button>
            </div>
            <div id="user-info" class="hidden flex items-center gap-2">
                <span id="user-display" class="text-green-400"></span>
                <button onclick="logout()" class="text-sm text-gray-400 underline">Tho√°t</button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="py-16 text-center">
        <h2 class="text-5xl font-extrabold mb-4">T√†i Kho·∫£n Premium Gi√° R·∫ª</h2>
        <p class="text-gray-400">Netflix, Spotify, YouTube Premium c·∫≠p nh·∫≠t h√†ng ng√†y.</p>
        <div id="sale-banner" class="hidden mt-4 inline-block bg-yellow-500/20 text-yellow-400 px-4 py-2 rounded-full border border-yellow-500/50">
            üéâ Ch√†o m·ª´ng th√†nh vi√™n m·ªõi! B·∫°n ƒë∆∞·ª£c gi·∫£m gi√° 30% cho t·∫•t c·∫£ ƒë∆°n h√†ng.
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-6 pb-20">
        <!-- Admin Panel (Ch·ªâ hi·ªán khi l√† Admin) -->
        <section id="admin-panel" class="hidden mb-12 glass p-6 rounded-2xl border-yellow-500/50">
            <h3 class="text-xl font-bold mb-4 text-yellow-500"><i class="fa-solid fa-user-shield"></i> B·∫£ng ƒêi·ªÅu Khi·ªÉn Admin</h3>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                <input type="text" id="p-name" placeholder="T√™n s·∫£n ph·∫©m" class="bg-slate-800 p-2 rounded">
                <input type="number" id="p-price" placeholder="Gi√° (VNƒê)" class="bg-slate-800 p-2 rounded">
                <input type="text" id="p-img" placeholder="Link ·∫£nh (URL)" class="bg-slate-800 p-2 rounded">
                <button onclick="addProduct()" class="bg-green-600 rounded font-bold">Th√™m s·∫£n ph·∫©m</button>
            </div>
        </section>

        <!-- Product Grid -->
        <div id="product-grid" class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-8">
            <!-- S·∫£n ph·∫©m s·∫Ω t·ª± ƒë·ªông load ·ªü ƒë√¢y -->
        </div>
    </main>

    <!-- Cart Sidebar -->
    <div id="cart-sidebar" class="fixed right-0 top-0 h-full w-80 glass z-[60] translate-x-full transition-transform duration-300 p-6">
        <div class="flex justify-between items-center mb-6">
            <h3 class="text-xl font-bold">Gi·ªè h√†ng</h3>
            <button onclick="toggleCart()"><i class="fa-solid fa-xmark"></i></button>
        </div>
        <div id="cart-items" class="space-y-4 overflow-y-auto h-[60vh]"></div>
        <div class="absolute bottom-0 left-0 w-full p-6 border-t border-white/10">
            <div class="flex justify-between mb-2">
                <span>T·ªïng c·ªông:</span>
                <span id="cart-total" class="font-bold text-blue-400">0ƒë</span>
            </div>
            <div id="discount-info" class="text-sm text-green-400 mb-4 hidden">ƒê√£ √°p d·ª•ng gi·∫£m gi√° 30% cho th√†nh vi√™n</div>
            <button onclick="checkout()" class="w-full bg-blue-600 py-3 rounded-xl font-bold hover:bg-blue-700 transition">THANH TO√ÅN NGAY</button>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="fixed inset-0 bg-black/80 hidden z-[70] flex items-center justify-center p-4">
        <div class="glass p-8 rounded-2xl w-full max-w-md relative">
            <button onclick="closeModal('loginModal')" class="absolute top-4 right-4 text-gray-400"><i class="fa-solid fa-x"></i></button>
            <h3 class="text-2xl font-bold mb-6 text-center">ƒêƒÉng nh·∫≠p / ƒêƒÉng k√Ω</h3>
            <div class="space-y-4">
                <input type="email" id="auth-email" placeholder="Email" class="w-full bg-slate-800 p-3 rounded-lg outline-none border border-white/10 focus:border-blue-500">
                <input type="password" id="auth-pass" placeholder="M·∫≠t kh·∫©u" class="w-full bg-slate-800 p-3 rounded-lg outline-none border border-white/10 focus:border-blue-500">
                <button onclick="handleAuth()" class="w-full bg-blue-600 py-3 rounded-lg font-bold">X√°c nh·∫≠n</button>
                <p class="text-xs text-gray-400 text-center italic mt-2">ƒêƒÉng k√Ω th√†nh vi√™n ƒë·ªÉ nh·∫≠n ∆∞u ƒë√£i 30%</p>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="glass py-10 mt-20 border-t border-white/10">
        <div class="container mx-auto px-6 text-center">
            <p class="mb-4 text-gray-400">Li√™n h·ªá h·ªó tr·ª£:</p>
            <div class="flex justify-center gap-6 text-2xl">
                <a href="https://facebook.com/ducmanh1212010" target="_blank" class="hover:text-blue-500"><i class="fa-brands fa-facebook"></i></a>
                <a href="https://tiktok.com/@dk_m.1109" target="_blank" class="hover:text-pink-500"><i class="fa-brands fa-tiktok"></i></a>
                <a href="https://zalo.me/0342370478" target="_blank" class="hover:text-blue-400 text-lg font-bold">ZALO</a>
            </div>
            <p class="mt-6 text-sm text-gray-500">&copy; 2024 B·∫£n quy·ªÅn thu·ªôc v·ªÅ ƒê·ª©c M·∫°nh Premium</p>
        </div>
    </footer>

    <script>
        // Data c∆° b·∫£n
        let products = JSON.parse(localStorage.getItem('products')) || [
            {id: 1, name: 'Netflix Premium 1 Th√°ng', price: 100000, img: 'https://images.unsplash.com/photo-1522869635100-9f4c5e86aa37?w=500'},
            {id: 2, name: 'Spotify Family 1 NƒÉm', price: 250000, img: 'https://images.unsplash.com/photo-1614680376593-902f74cf0d41?w=500'},
            {id: 3, name: 'Youtube Premium', price: 30000, img: 'https://images.unsplash.com/photo-1611162617213-7d7a39e9b1d7?w=500'}
        ];

        let cart = [];
        let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;

        // Kh·ªüi t·∫°o
        window.onload = () => {
            renderProducts();
            checkUserStatus();
        };

        function renderProducts() {
            const grid = document.getElementById('product-grid');
            grid.innerHTML = products.map(p => {
                let displayPrice = p.price;
                let priceHtml = `<span class="text-blue-400 font-bold">${displayPrice.toLocaleString()}ƒë</span>`;
                
                if (currentUser && currentUser.email !== 'banducmanh2010@gmail.com') {
                    displayPrice = p.price * 0.7;
                    priceHtml = `
                        <span class="text-gray-500 line-through text-sm">${p.price.toLocaleString()}ƒë</span>
                        <span class="text-green-400 font-bold">${displayPrice.toLocaleString()}ƒë (-30%)</span>
                    `;
                }

                return `
                <div class="glass p-4 rounded-2xl hover:scale-105 transition duration-300">
                    <img src="${p.img}" class="w-full h-40 object-cover rounded-xl mb-4">
                    <h4 class="font-bold text-lg mb-2">${p.name}</h4>
                    <div class="flex flex-col mb-4">${priceHtml}</div>
                    <button onclick="addToCart(${p.id})" class="w-full bg-white/10 py-2 rounded-lg hover:bg-blue-600 transition">
                        <i class="fa-solid fa-cart-plus mr-2"></i>Th√™m v√†o gi·ªè
                    </button>
                </div>
            `}).join('');
        }

        // Authentication logic
        function handleAuth() {
            const email = document.getElementById('auth-email').value;
            const pass = document.getElementById('auth-pass').value;

            if (email === 'banducmanh2010@gmail.com' && pass === 'banducmanh1212010') {
                currentUser = { email: email, role: 'admin' };
                alert('Ch√†o m·ª´ng Admin ƒê·ª©c M·∫°nh!');
            } else if (email && pass) {
                currentUser = { email: email, role: 'member' };
                alert('ƒêƒÉng nh·∫≠p th√†nh c√¥ng! B·∫°n nh·∫≠n ƒë∆∞·ª£c gi·∫£m gi√° 30%');
            } else {
                return alert('Vui l√≤ng nh·∫≠p ƒë·ªß th√¥ng tin');
            }

            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            closeModal('loginModal');
            checkUserStatus();
            renderProducts();
        }

        function checkUserStatus() {
            if (currentUser) {
                document.getElementById('auth-buttons').classList.add('hidden');
                document.getElementById('user-info').classList.remove('hidden');
                document.getElementById('user-display').innerText = currentUser.email.split('@')[0];
                
                if (currentUser.role === 'admin') {
                    document.getElementById('admin-panel').classList.remove('hidden');
                } else {
                    document.getElementById('sale-banner').classList.remove('hidden');
                    document.getElementById('discount-info').classList.remove('hidden');
                }
            }
        }

        function logout() {
            localStorage.removeItem('currentUser');
            location.reload();
        }

        // Admin Function
        function addProduct() {
            const name = document.getElementById('p-name').value;
            const price = document.getElementById('p-price').value;
            const img = document.getElementById('p-img').value;

            if (name && price && img) {
                const newP = { id: Date.now(), name, price: parseInt(price), img };
                products.push(newP);
                localStorage.setItem('products', JSON.stringify(products));
                renderProducts();
                alert('ƒê√£ th√™m s·∫£n ph·∫©m m·ªõi th√†nh c√¥ng!');
            }
        }

        // Cart logic
        function addToCart(id) {
            const product = products.find(p => p.id === id);
            cart.push(product);
            updateCart();
            alert('ƒê√£ th√™m v√†o gi·ªè h√†ng!');
        }

        function updateCart() {
            document.getElementById('cart-count').innerText = cart.length;
            const cartItems = document.getElementById('cart-items');
            let total = 0;

            cartItems.innerHTML = cart.map((item, index) => {
                let itemPrice = item.price;
                if (currentUser && currentUser.role === 'member') itemPrice *= 0.7;
                total += itemPrice;
                return `
                    <div class="flex justify-between items-center bg-white/5 p-3 rounded-lg">
                        <div class="text-sm">
                            <p class="font-bold">${item.name}</p>
                            <p class="text-blue-400">${itemPrice.toLocaleString()}ƒë</p>
                        </div>
                        <button onclick="removeFromCart(${index})" class="text-red-500 text-xs hover:underline">X√≥a</button>
                    </div>
                `;
            }).join('');
            
            document.getElementById('cart-total').innerText = total.toLocaleString() + 'ƒë';
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCart();
        }

        function toggleCart() {
            const sidebar = document.getElementById('cart-sidebar');
            sidebar.classList.toggle('translate-x-full');
        }

        function checkout() {
            if (cart.length === 0) return alert('Gi·ªè h√†ng tr·ªëng!');
            
            let message = `Ch√†o shop, m√¨nh mu·ªën mua c√°c t√†i kho·∫£n sau: \n`;
            cart.forEach(item => message += `- ${item.name} \n`);
            
            const encodedMsg = encodeURIComponent(message);
            
            // Hi·ªán l·ª±a ch·ªçn k√™nh li√™n h·ªá
            const choice = confirm("Vui l√≤ng ch·ªçn k√™nh thanh to√°n:\n- Nh·∫•n OK ƒë·ªÉ qua Zalo\n- Nh·∫•n CANCEL ƒë·ªÉ qua Facebook Messenger");
            
            if (choice) {
                window.open(`https://zalo.me/0342370478?text=${encodedMsg}`, '_blank');
            } else {
                window.open(`https://m.me/ducmanh1212010`, '_blank');
            }
        }

        // Helpers
        function showModal(id) { document.getElementById(id).classList.remove('hidden'); }
        function closeModal(id) { document.getElementById(id).classList.add('hidden'); }
    </script>
</body>
</html>
